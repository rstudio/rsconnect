<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Detect application dependencies — appDependencies • rsconnect</title><!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png"><link rel="icon" type="”image/svg+xml”" href="../favicon.svg"><link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png"><link rel="icon" sizes="any" href="../favicon.ico"><link rel="manifest" href="../site.webmanifest"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Source_Sans_Pro-0.4.10/font.css" rel="stylesheet"><link href="../deps/Source_Code_Pro-0.4.10/font.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Detect application dependencies — appDependencies"><meta name="description" content="appDependencies() recursively detects all R package dependencies for an
application by parsing all .R and .Rmd files and looking for calls
to library(), require(), requireNamespace(), ::, and so on.
It then adds implicit dependencies (i.e. an .Rmd requires Rmarkdown)
and adds all recursive dependencies to create a complete manifest of
package packages need to be installed to run the app."><meta property="og:description" content="appDependencies() recursively detects all R package dependencies for an
application by parsing all .R and .Rmd files and looking for calls
to library(), require(), requireNamespace(), ::, and so on.
It then adds implicit dependencies (i.e. an .Rmd requires Rmarkdown)
and adds all recursive dependencies to create a complete manifest of
package packages need to be installed to run the app."><meta property="og:image" content="https://rstudio.github.io/rsconnect/logo.svg"></head><body>
    <a href="#container" class="visually-hidden-focusable">Skip to content</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-none" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">rsconnect</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">1.4.2</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/custom-http.html">Customising HTTP requests</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/rstudio/rsconnect/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic" id="container">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.svg" class="logo" alt=""><h1>Detect application dependencies</h1>
      <small class="dont-index">Source: <a href="https://github.com/rstudio/rsconnect/blob/main/R/appDependencies.R" class="external-link"><code>R/appDependencies.R</code></a></small>
      <div class="d-none name"><code>appDependencies.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p><code>appDependencies()</code> recursively detects all R package dependencies for an
application by parsing all <code>.R</code> and <code>.Rmd</code> files and looking for calls
to <code><a href="https://rdrr.io/r/base/library.html" class="external-link">library()</a></code>, <code><a href="https://rdrr.io/r/base/library.html" class="external-link">require()</a></code>, <code><a href="https://rdrr.io/r/base/ns-load.html" class="external-link">requireNamespace()</a></code>, <code>::</code>, and so on.
It then adds implicit dependencies (i.e. an <code>.Rmd</code> requires Rmarkdown)
and adds all recursive dependencies to create a complete manifest of
package packages need to be installed to run the app.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">appDependencies</span><span class="op">(</span></span>
<span>  appDir <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/getwd.html" class="external-link">getwd</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  appFiles <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  appFileManifest <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  appMode <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-appdir">appDir<a class="anchor" aria-label="anchor" href="#arg-appdir"></a></dt>
<dd><p>A directory containing an application (e.g. a Shiny app
or plumber API). Defaults to the current directory.</p></dd>


<dt id="arg-appfiles-appfilemanifest">appFiles, appFileManifest<a class="anchor" aria-label="anchor" href="#arg-appfiles-appfilemanifest"></a></dt>
<dd><p>Use <code>appFiles</code> to specify a
character vector of files to bundle in the app or <code>appFileManifest</code>
to provide a path to a file containing a list of such files. If neither
are supplied, will bundle all files in <code>appDir</code>, apart from standard
exclusions and files listed in a <code>.rscignore</code> file. See
<code><a href="listDeploymentFiles.html">listDeploymentFiles()</a></code> for more details.</p></dd>


<dt id="arg-appmode">appMode<a class="anchor" aria-label="anchor" href="#arg-appmode"></a></dt>
<dd><p>Optional; the type of content being deployed.
Provide this option when the inferred type of content is incorrect. This
can happen, for example, when static HTML content includes a downloadable
Shiny application <code>app.R</code>. Accepted values include <code>"shiny"</code>, <code>"api"</code>,
<code>"rmd-static"</code>, <code>"rmd-shiny"</code>, <code>"quarto-static"</code>, <code>"quarto-shiny"</code>, and
<code>"static"</code>. The Posit Connect API Reference contains a full set of
available values. Not all servers support all types of content.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A data frame with one row for each dependency (direct, indirect,
and inferred), and 4 columns:</p><ul><li><p><code>Package</code>: package name.</p></li>
<li><p><code>Version</code>: local version.</p></li>
<li><p><code>Source</code>: a short string describing the source of the package install,
as described above.</p></li>
<li><p><code>Repository</code>: for CRAN and CRAN-like repositories, the URL to the
repository. This will be ignored by the server if it has been configured
with its own repository name -&gt; repository URL mapping.</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="dependency-discovery">Dependency discovery<a class="anchor" aria-label="anchor" href="#dependency-discovery"></a></h2>
    <p>rsconnect use one of three mechanisms to find which packages your application
uses:</p><ol><li><p>If <code>renv.lock</code> is present, it will use the versions and sources defined in
that file. If you're using the lockfile for some other purpose and
don't want it to affect deployment, add <code>renv.lock</code> to <code>.rscignore</code>.</p></li>
<li><p>Otherwise, rsconnect will call <code><a href="https://rstudio.github.io/renv/reference/snapshot.html" class="external-link">renv::snapshot()</a></code> to find all packages
used by your code. If you'd instead prefer to only use the packages
declared in a <code>DESCRIPTION</code> file, run
<code>renv::settings$snapshot.type("explicit")</code> to activate renv's "explicit"
mode.</p></li>
<li><p>Dependency resolution using renv is a new feature in rsconnect 1.0.0, and
while we have done our best to test it, it still might fail for your app.
If this happens, please <a href="https://github.com/rstudio/rsconnect/issues" class="external-link">file an issue</a>
then set <code>options(rsconnect.packrat = TRUE)</code> to revert to the old
dependency discovery mechanism.</p></li>
</ol></div>
    <div class="section level2">
    <h2 id="remote-installation">Remote installation<a class="anchor" aria-label="anchor" href="#remote-installation"></a></h2>
    <p>When deployed, the app must first install all of these packages, and
rsconnect ensures the versions used on the server will match the versions
you used locally. It knows how to install packages from the following
sources:</p><ul><li><p>CRAN and BioConductor (<code>Source: CRAN</code> or <code>Source: Bioconductor</code>). The
remote server will ignore the specific CRAN or Bioconductor mirror that
you use locally, always using the CRAN/BioC mirror that has been configured
on the server.</p></li>
<li><p>Other CRAN like and CRAN-like repositories. These packages will have
a <code>Source</code> determined by the value of <code>getOptions("repos")</code>. For example,
if you've set the following options:</p>
<p></p><div class="sourceCode R"><pre><code><span><span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">options</a></span><span class="op">(</span></span>
<span>   repos <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>     CRAN <span class="op">=</span> <span class="st">"https://cran.rstudio.com/"</span>,</span>
<span>     CORPORATE <span class="op">=</span> <span class="st">"https://corporate-packages.development.company.com"</span></span>
<span>   <span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre><p></p></div>
<p>Then packages installed from your corporate package repository will
have source <code>CORPORATE</code>. Posit Connect
<a href="https://docs.posit.co/connect/admin/appendix/configuration/#RPackageRepository" class="external-link">can be configured</a>
to override their repository url so that (e.g.) you can use different
packages versions on staging and production servers.</p></li>
<li><p>Packages installed from GitHub, GitLab, or BitBucket, have <code>Source</code>
<code>github</code>, <code>gitlab</code>, and <code>bitbucket</code> respectively. When deployed, the
bundle contains the additional metadata needed to precisely recreated
the installed version.</p></li>
</ul><p>It's not possible to recreate the packages that you have built and installed
from a directory on your local computer. This will have <code>Source: NA</code> and
will cause the deployment to error. To resolve this issue, you'll need to
install from one of the known sources described above.</p>
    </div>
    <div class="section level2">
    <h2 id="suggested-packages">Suggested packages<a class="anchor" aria-label="anchor" href="#suggested-packages"></a></h2>
    <p>The <code>Suggests</code> field is not included when determining recursive dependencies,
so it's possible that not every package required to run your application will
be detected.</p>
<p>For example, ggplot2's <code>geom_hex()</code> requires the hexbin package to be
installed, but it is only suggested by ggplot2. So if your app uses
<code>geom_hex()</code> it will fail, reporting that the hexbin package is not
installed.</p>
<p>You can overcome this problem with (e.g.) <code><a href="https://rdrr.io/r/base/ns-load.html" class="external-link">requireNamespace(hexbin)</a></code>.
This will tell rsconnect that your app needs the hexbin package, without
otherwise affecting your code.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><a href="rsconnectPackages.html">rsconnectPackages</a>(Using Packages with rsconnect)</p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># dependencies for the app in the current working dir</span></span></span>
<span class="r-in"><span><span class="fu">appDependencies</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># dependencies for an app in another directory</span></span></span>
<span class="r-in"><span><span class="fu">appDependencies</span><span class="op">(</span><span class="st">"~/projects/shiny/app1"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


   </div>
  <footer><div class="container">
  <div class="pkgdown-footer-left">
  <p>Developed by Aron Atkins, Toph Allen, <a href="https://hadley.nz" class="external-link">Hadley Wickham</a>, Jonathan McPherson, JJ Allaire, <a href="https://www.posit.co" class="external-link"><img src="https://www.tidyverse.org/posit-logo.svg" alt="Posit" height="16" width="62" style="margin-bottom: 3px;"></a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

  </div></footer></body></html>

